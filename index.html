<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Eddy Arriaga | Software Developer</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">

    <!-- Mobile Performance Optimizations -->
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Preload critical resources -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="preload" href="js/script.js" as="script">
</head>

<body data-theme="default" class="font-inter overflow-x-hidden">
    <!-- Mobile Touch Indicator -->
    <div class="mobile-touch-indicator"></div>

    <!-- Custom Cursors -->
    <div class="custom-cursor"></div>
    <div class="cursor-follower"></div>
    <div class="mobile-cursor"></div>

    <!-- Audio Player (Hidden) -->
    <audio id="audioPlayer" preload="metadata" crossorigin="anonymous" class="hidden"></audio>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-logo">EA</div>
            <div class="loading-text">INITIALIZING</div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
            </div>
        </div>
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="navbar" class="nav-bar">
        <div class="nav-container">
            <a href="#" class="logo-container">
                <span class="logo-text">EA</span>
            </a>
            <ul class="nav-links">
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#skills" class="nav-link">Skills</a></li>
                <li><a href="#projects" class="nav-link">Projects</a></li>
                <li><a href="#experience" class="nav-link">Experience</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <ul class="mobile-nav-links">
                <li><a href="#about" class="mobile-nav-link">About</a></li>
                <li><a href="#skills" class="mobile-nav-link">Skills</a></li>
                <li><a href="#projects" class="mobile-nav-link">Projects</a></li>
                <li><a href="#experience" class="mobile-nav-link">Experience</a></li>
                <li><a href="#contact" class="mobile-nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="floating-elements">
            <div class="floating-code floating-element">console.log('hello');</div>
            <div class="floating-code floating-element">function() { }</div>
            <div class="floating-code floating-element">&lt;div className="app"&gt;</div>
            <div class="floating-code floating-element">const data = [];</div>
            <div class="floating-code floating-element">return &lt;Component /&gt;</div>
            <div class="floating-code floating-element">npm install react</div>
            <div class="floating-code floating-element">git commit -m "update"</div>
            <div class="floating-code floating-element">async/await</div>
            <div class="geometric-shape shape-1 floating-element"></div>
            <div class="geometric-shape shape-2 floating-element"></div>
            <div class="geometric-shape shape-3 floating-element"></div>
            <div class="geometric-shape shape-4 floating-element"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title">
                Eddy <span class="name-spacing"></span> Arriaga
            </h1>
            <p class="hero-subtitle">Software Developer | Digital Creator</p>
            <a href="#about" class="hero-cta">
                <span class="cta-shimmer"></span>
                <span class="relative">Explore My Work</span>
            </a>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="floating-tech-icon tech-1 floating-element">&lt;/&gt;</div>
        <div class="floating-tech-icon tech-2 floating-element">{ }</div>
        <div class="floating-tech-icon tech-3 floating-element">[ ]</div>
        <div class="floating-tech-icon tech-4 floating-element">( )</div>
        <div class="floating-tech-icon tech-5 floating-element">===</div>
        <div class="floating-tech-icon tech-6 floating-element">!=</div>
        <div class="section-container">
            <h2 class="section-title animate-on-scroll">
                About Me
                <span class="section-decorator">{ }</span>
            </h2>
            <div class="about-content">
                <div class="about-text animate-on-scroll">
                    <h3>I build things with code</h3>
                    <p>I'm a passionate Computer Science student at UNCG with a love for creating innovative solutions
                        through code. With experience as an Apple Specialist, I bring both technical expertise and
                        strong communication skills to every project.</p>

                    <h3>My belief</h3>
                    <p>As a Senior CS student at UNCG, with an Associate of Science degree, I am passionate about using
                        technology to solve problems. I hope to produce results. I am bilingual in English and Spanish.
                    </p>
                </div>

                <div class="stats-grid animate-on-scroll">
                    <div class="stat-item">
                        <div class="stat-icon">üöÄ</div>
                        <span class="stat-number" data-target="2">0</span>
                        <span class="stat-label">Years of Coding</span>
                        <div class="stat-description">Always learning...</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üíª</div>
                        <span class="stat-number" data-target="12">0</span>
                        <span class="stat-label">Projects Built</span>
                        <div class="stat-description">Attempts on Attempts</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">‚ö°</div>
                        <span class="stat-number" data-target="4">0</span>
                        <span class="stat-label">Tech Stacks</span>
                        <div class="stat-description">Learning always...</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üî•</div>
                        <span class="stat-number">‚àû</span>
                        <span class="stat-label">Lines of Code</span>
                        <div class="stat-description">Endless possibilities</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="skills-section">
        <div class="floating-symbols symbol-1 floating-element">;</div>
        <div class="floating-symbols symbol-2 floating-element">=&gt;</div>
        <div class="floating-symbols symbol-3 floating-element">&&</div>
        <div class="floating-symbols symbol-4 floating-element">||</div>
        <div class="floating-symbols symbol-5 floating-element">++</div>
        <div class="floating-symbols symbol-6 floating-element">--</div>
        <div class="floating-symbols symbol-7 floating-element">??</div>
        <div class="section-container">
            <h2 class="section-title animate-on-scroll">
                Technical Skills
                <span class="section-decorator">{ }</span>
            </h2>
            <div class="skills-grid">
                <div class="skill-card animate-on-scroll" data-skill="frontend">
                    <span class="skill-shimmer"></span>
                    <span class="skill-icon">üíª</span>
                    <h3 class="skill-title">Frontend Development</h3>
                    <p class="skill-desc">React, JavaScript, HTML/CSS, and more</p>
                    <div class="skill-progress-container">
                        <div class="skill-progress frontend"></div>
                    </div>
                </div>
                <div class="skill-card animate-on-scroll" data-skill="backend">
                    <span class="skill-shimmer"></span>
                    <span class="skill-icon">‚öôÔ∏è</span>
                    <h3 class="skill-title">Backend Development</h3>
                    <p class="skill-desc">Node.js, Python, Java, database design, API development and more</p>
                    <div class="skill-progress-container">
                        <div class="skill-progress backend"></div>
                    </div>
                </div>
                <div class="skill-card animate-on-scroll" data-skill="tools">
                    <span class="skill-shimmer"></span>
                    <span class="skill-icon">üõ†Ô∏è</span>
                    <h3 class="skill-title">Development Tools</h3>
                    <p class="skill-desc">Git, VS Code, Linux, Docker, and more</p>
                    <div class="skill-progress-container">
                        <div class="skill-progress tools"></div>
                    </div>
                </div>
                <div class="skill-card animate-on-scroll" data-skill="mobile">
                    <span class="skill-shimmer"></span>
                    <span class="skill-icon">üì±</span>
                    <h3 class="skill-title">Mobile Development</h3>
                    <p class="skill-desc">React Native, and more</p>
                    <div class="skill-progress-container">
                        <div class="skill-progress mobile"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects-section">
        <div class="section-container">
            <h2 class="section-title animate-on-scroll">
                Featured Projects
                <span class="section-decorator">{ }</span>
            </h2>
            <div class="projects-grid">
                <div class="project-card animate-on-scroll">
                    <div class="project-image">
                        <div class="project-mockup">
                            <div class="mockup-header"></div>
                            <div class="mockup-dots">‚óè ‚óè ‚óè</div>
                            <div class="project-code-preview">
                                <pre><code class="language-java">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Java DSA Learning Site - Master Data Structures &amp; Algorithms&lt;/title&gt;
    &lt;meta name="description" content="Complete Java Data Structures &amp; Algorithms learning platform with interactive examples, quizzes, and flashcards"&gt;
    &lt;link rel="stylesheet" href="styles.css"&gt;
    &lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;
&lt;/head&gt;

</code></pre>
                            </div>
                        </div>
                        <div class="project-overlay"></div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Java-DSA-Helper</h3>
                        <p class="project-desc">From beginner to intermediate to advanced, covers all topics of CSC230
                            and more
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Java</span>
                            <span class="tech-tag">Swing</span>
                            <span class="tech-tag">AES Encryption</span>
                            <span class="tech-tag">DSA</span>

                        </div>
                        <a href="#" class="project-link">View Project ‚Üí</a>
                    </div>
                </div>

                <div class="project-card animate-on-scroll">
                    <div class="project-image">
                        <div class="project-mockup">
                            <div class="mockup-header"></div>
                            <div class="mockup-dots">‚óè ‚óè ‚óè</div>
                            <div class="project-code-preview">
                                <pre><code class="language-jsx">
    &lt;!-- Preload critical resources --&gt;
    &lt;link rel="preload" href="css/style.css" as="style"&gt;
    &lt;link rel="preload" href="js/script.js" as="script"&gt;
&lt;/head&gt;

&lt;body data-theme="default" class="font-inter overflow-x-hidden"&gt;
    &lt;!-- Mobile Touch Indicator --&gt;
    &lt;div class="mobile-touch-indicator"&gt;&lt;/div&gt;

    &lt;!-- Custom Cursors (Now mobile-enabled) --&gt;

</code></pre>
                            </div>
                        </div>
                        <div class="project-overlay"></div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">Portfolio-Website</h3>
                        <p class="project-desc">This exact sleek modern portfolio website you see.</p>
                        <div class="project-tech">
                            <span class="tech-tag">HTML</span>
                            <span class="tech-tag">Tailwind CSS</span>
                            <span class="tech-tag">JavaScript</span>
                            <span class="tech-tag">Audio API</span>
                        </div>
                        <a href="#" class="project-link">View Project ‚Üí</a>
                    </div>
                </div>

                <div class="project-card animate-on-scroll">
                    <div class="project-image">
                        <div class="project-mockup">
                            <div class="mockup-header"></div>
                            <div class="mockup-dots">‚óè ‚óè ‚óè</div>
                            <div class="project-code-preview">
                                <pre><code class="language-js">
const [stats, setStats] = useState([]);

useEffect(() => {
    fetchNBAData().then(setStats);
}, []);
</code></pre>
                            </div>
                        </div>
                        <div class="project-overlay"></div>
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">NBA-Tracker-STATS-APP</h3>
                        <p class="project-desc">A clean, mobile-first NBA game tracker that displays live scores,
                            scheduled games, and top player stats.</p>
                        <div class="project-tech">
                            <span class="tech-tag">React Native</span>
                            <span class="tech-tag">Firebase</span>
                            <span class="tech-tag">Redux</span>
                        </div>
                        <a href="#" class="project-link">View Project ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="experience-section">
        <div class="section-container">
            <h2 class="section-title animate-on-scroll">
                Experience
                <span class="section-decorator">{ }</span>
            </h2>
            <div class="timeline">
                <div class="timeline-line"></div>
                <div class="timeline-item animate-on-scroll">
                    <div class="timeline-dot"></div>
                    <div class="timeline-icon">üçé</div>
                    <div class="timeline-content">
                        <div class="timeline-date">Nov. 2024 - Mar. 2025</div>
                        <h3 class="timeline-title">Apple Specialist</h3>
                        <div class="timeline-company">Apple</div>
                        <p class="timeline-desc">Assist customers with purchasing Apple products, including iPhones,
                            iPads, MacBooks, and accessories, by providing personalized solutions based on their needs.
                        </p>
                    </div>
                </div>
                <div class="timeline-item animate-on-scroll">
                    <div class="timeline-dot"></div>
                    <div class="timeline-icon">üéì</div>
                    <div class="timeline-content">
                        <div class="timeline-date">Aug. 2024 - Present</div>
                        <h3 class="timeline-title">Computer Science Student</h3>
                        <div class="timeline-company">University of North Carolina at Greensboro (UNCG)</div>
                        <p class="timeline-desc">Pursuing B.S. in Computer Science, maintaining strong GPA.</p>
                    </div>
                </div>
                <div class="timeline-item animate-on-scroll">
                    <div class="timeline-dot"></div>
                    <div class="timeline-icon">üíª</div>
                    <div class="timeline-content">
                        <div class="timeline-date">2024 - Present</div>
                        <h3 class="timeline-title">Freelance Developer</h3>
                        <div class="timeline-company">Self-Employed</div>
                        <p class="timeline-desc">Developing web applications and working on personal projects, focusing
                            on modern frameworks and exceptional user experience.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="floating-contact-icons contact-1 floating-element">üìß</div>
        <div class="floating-contact-icons contact-2 floating-element">üí¨</div>
        <div class="floating-contact-icons contact-3 floating-element">üîó</div>
        <div class="floating-contact-icons contact-4 floating-element">üíº</div>
        <div class="floating-contact-icons contact-5 floating-element">üì±</div>
        <div class="section-container">
            <h2 class="section-title animate-on-scroll">
                Let's Connect
                <span class="section-decorator">{ }</span>
            </h2>
            <div class="contact-content">
                <div class="contact-terminal">$ contact --interactive</div>
                <p class="contact-text animate-on-scroll">
                    I'm always interested in new opportunities and collaborations.
                    Whether you're looking for a developer, have a project in mind,
                    or just want to connect, I'd love to hear from you.
                </p>
                <div class="contact-links animate-on-scroll">
                    <a href="mailto:eddyarriaga06@gmail.com" class="contact-link">
                        <span class="contact-fill"></span>
                        <span class="relative">Email Me</span>
                    </a>
                    <a href="https://github.com/eddyarriaga00" class="contact-link" target="_blank">
                        <span class="contact-fill"></span>
                        <span class="relative">GitHub</span>
                    </a>
                    <a href="https://www.linkedin.com/in/eddy-arriaga/" class="contact-link" target="_blank">
                        <span class="contact-fill"></span>
                        <span class="relative">LinkedIn</span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p class="footer-text">¬© 2024 Eddy Arriaga. All rights reserved.</p>

        <!-- Back to Top Button -->
        <button class="back-to-top" id="backToTop" title="Back to top" aria-label="Back to top">
            <div class="back-to-top-icon">‚Üë</div>
        </button>
    </footer>

    <!-- Settings Panel -->
    <div class="settings-panel">
        <button class="settings-button" id="settingsBtn" aria-label="Open settings">‚öôÔ∏è</button>
        <div class="settings-menu" id="settingsMenu">
            <div class="settings-scroll-container">
                <!-- Main Settings Menu -->
                <div class="settings-main-menu" id="settingsMainMenu">
                    <div class="settings-header">
                        <h3 class="settings-main-title">Settings</h3>
                        <button class="mobile-close-btn" id="settingsCloseBtn" aria-label="Close settings">√ó</button>
                    </div>
                    <div class="settings-categories">
                        <div class="settings-category" data-section="mouse">
                            <div class="category-icon">üñ±Ô∏è</div>
                            <div class="category-info">
                                <div class="category-title">Mouse Customization</div>
                                <div class="category-desc">Cursor size, opacity, and behavior</div>
                            </div>
                            <div class="category-arrow">‚Üí</div>
                        </div>
                        <div class="settings-category" data-section="theme">
                            <div class="category-icon">üé®</div>
                            <div class="category-info">
                                <div class="category-title">Theme Customization</div>
                                <div class="category-desc">Colors, themes, and appearance</div>
                            </div>
                            <div class="category-arrow">‚Üí</div>
                        </div>
                        <div class="settings-category" data-section="music">
                            <div class="category-icon">üéµ</div>
                            <div class="category-info">
                                <div class="category-title">Music Player</div>
                                <div class="category-desc">Audio controls and playlist</div>
                            </div>
                            <div class="category-arrow">‚Üí</div>
                        </div>
                        <div class="settings-category" data-section="misc">
                            <div class="category-icon">‚öôÔ∏è</div>
                            <div class="category-info">
                                <div class="category-title">Misc.</div>
                                <div class="category-desc">Animations, effects, and preferences</div>
                            </div>
                            <div class="category-arrow">‚Üí</div>
                        </div>
                    </div>
                </div>

                <!-- Mouse Customization Section -->
                <div class="settings-section-view" id="mouseSection">
    <div class="settings-header">
        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
        </button>
        <h3 class="settings-section-title">Mouse Customization</h3>
    </div>
    <div class="settings-content">
        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Enable Custom Cursor</span>
                <span class="setting-desc">Show custom cursor (works on mobile)</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="cursorEnabled" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Cursor Size</span>
                <span class="setting-desc">Adjust the size of the custom cursor</span>
            </label>
            <div class="setting-control">
                <input type="range" min="8" max="32" value="12" class="setting-slider" id="cursorSize">
                <span class="setting-value" id="cursorSizeValue">12px</span>
            </div>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Cursor Opacity</span>
                <span class="setting-desc">Adjust cursor transparency</span>
            </label>
            <div class="setting-control">
                <input type="range" min="20" max="100" value="100" class="setting-slider" id="cursorOpacity">
                <span class="setting-value" id="cursorOpacityValue">100%</span>
            </div>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Follower Size</span>
                <span class="setting-desc">Size of the cursor follower</span>
            </label>
            <div class="setting-control">
                <input type="range" min="20" max="60" value="36" class="setting-slider" id="followerSize">
                <span class="setting-value" id="followerSizeValue">36px</span>
            </div>
        </div>
    </div>
</div>
                    <div class="settings-content">
                        <div class="music-player">
                            <div id="audioError" class="audio-error hidden">
                                Music files not found. Make sure to add your audio files to the /music folder or reload
                                the page and try again.
                            </div>
<div class="settings-section-view" id="themeSection">
    <div class="settings-header">
        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
        </button>
        <h3 class="settings-section-title">Theme Customization</h3>
    </div>
    <div class="settings-content">
        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Choose Theme</span>
                <span class="setting-desc">Select from preset themes</span>
            </label>
        </div>
        <div class="theme-grid">
            <div class="theme-option active" data-theme="default">
                <div class="theme-preview default-preview"></div>
                Default
            </div>
            <div class="theme-option" data-theme="jojos">
                <div class="theme-preview jojos-preview"></div>
                üéÄ J's Theme üéÄ
            </div>
            <div class="theme-option" data-theme="github">
                <div class="theme-preview github-preview"></div>
                GitHub
            </div>
            <div class="theme-option" data-theme="discord">
                <div class="theme-preview discord-preview"></div>
                Discord
            </div>
            <div class="theme-option" data-theme="spotify">
                <div class="theme-preview spotify-preview"></div>
                Spotify
            </div>
            <div class="theme-option" data-theme="vscode">
                <div class="theme-preview vscode-preview"></div>
                VS Code
            </div>
            <div class="theme-option" data-theme="ocean">
                <div class="theme-preview ocean-preview"></div>
                Ocean
            </div>
        </div>

        <div class="custom-theme-section">
            <h4 class="custom-theme-title">Create Custom Theme</h4>
            <div class="color-pickers">
                <div class="color-picker-group">
                    <label for="primaryColor">Primary Color</label>
                    <input type="color" id="primaryColor" value="#000000" class="color-input">
                </div>
                <div class="color-picker-group">
                    <label for="accentColor">Accent Color</label>
                    <input type="color" id="accentColor" value="#ffffff" class="color-input">
                </div>
            </div>
            <button class="apply-custom-theme" id="applyCustomTheme">Apply Custom Theme</button>
        </div>
    </div>
</div>
                            <div class="player-info">
                                <div class="track-info">
                                    <div class="track-title" id="currentTrackTitle">Select a track</div>
                                    <div class="track-artist" id="currentTrackArtist">Click a song to play</div>
                                </div>

                                <div class="player-controls">
                                    <button class="control-btn" id="prevBtn" aria-label="Previous track">
                                        <span class="control-shimmer"></span>
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                                        </svg>
                                    </button>
                                    <button class="control-btn play-pause-btn" id="playPauseBtn"
                                        aria-label="Play/Pause">
                                        <span class="control-shimmer"></span>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"
                                            class="play-icon">
                                            <path d="m7 4 10 8L7 20V4z" />
                                        </svg>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"
                                            class="pause-icon hidden">
                                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                                        </svg>
                                    </button>
                                    <button class="control-btn" id="nextBtn" aria-label="Next track">
                                        <span class="control-shimmer"></span>
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z" />
                                        </svg>
                                    </button>
                                </div>

                                <div class="progress-section">
                                    <div class="progress-bar" id="progressBar">
                                        <div class="progress-fill" id="progressFill"></div>
                                        <div class="progress-handle"></div>
                                    </div>
                                    <div class="time-display">
                                        <span id="currentTime">0:00</span>
                                        <span id="duration">0:00</span>
                                    </div>
                                </div>

                                <div class="volume-section">
                                    <div class="volume-icon-container">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"
                                            class="volume-icon-svg">
                                            <path
                                                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                                        </svg>
                                    </div>
                                    <div class="volume-slider-container" id="volumeSliderContainer">
                                        <input type="range" min="0" max="100" value="70" class="volume-slider"
                                            id="volumeSlider">
                                        <div class="volume-slider-track">
                                            <div class="volume-slider-fill" id="volumeSliderFill"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="playlist-section">
                                <div class="playlist-header">
                                    <span class="playlist-icon">üéµ</span>
                                    <span>Playlist</span>
                                </div>
                                <ul class="playlist" id="playlist">
                                    <li class="playlist-item" data-index="0">
                                        <div class="track-number">1</div>
                                        <div class="track-details">
                                            <div class="playlist-track-title">Say Slatt Say Ski</div>
                                            <div class="playlist-track-artist">Lucki</div>
                                        </div>
                                        <div class="track-duration">3:09</div>
                                    </li>
                                    <li class="playlist-item" data-index="1">
                                        <div class="track-number">2</div>
                                        <div class="track-details">
                                            <div class="playlist-track-title">Limerence</div>
                                            <div class="playlist-track-artist">Lucki</div>
                                        </div>
                                        <div class="track-duration">2:46</div>
                                    </li>
                                    <li class="playlist-item" data-index="2">
                                        <div class="track-number">3</div>
                                        <div class="track-details">
                                            <div class="playlist-track-title">Go Hard 2.0</div>
                                            <div class="playlist-track-artist">Juice WRLD</div>
                                        </div>
                                        <div class="track-duration">3:34</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visual & Performance Section -->
                <div class="settings-section-view" id="miscSection">
                    <div class="settings-header">
                        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h3 class="settings-section-title">Misc.</h3>
                    </div>
                    <div class="settings-content">
                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Reduced Motion</span>
                                <span class="setting-desc">Disable heavy animations for better performance</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="reducedMotion">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Auto-play Music</span>
                                <span class="setting-desc">Automatically start music when page loads</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoplayMusic">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Show Floating Elements</span>
                                <span class="setting-desc">Display animated code snippets and shapes</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showFloatingElements" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Background Particles</span>
                                <span class="setting-desc">Show floating particles in background</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showParticles" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Code Snippets Animation</span>
                                <span class="setting-desc">Enable floating code elements</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showCodeSnippets" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Geometric Shapes</span>
                                <span class="setting-desc">Display animated geometric elements</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showGeometricShapes" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Animation Speed</span>
                                <span class="setting-desc">Control speed of all animations</span>
                            </label>
                            <div class="setting-control">
                                <input type="range" min="50" max="200" value="100" class="setting-slider"
                                    id="animationSpeed">
                                <span class="setting-value" id="animationSpeedValue">100%</span>
                            </div>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Parallax Effects</span>
                                <span class="setting-desc">Enable parallax scrolling effects (desktop only)</span>
                            </label>
                            <div class="setting-control">
                                <input type="range" min="0" max="100" value="100" class="setting-slider"
                                    id="parallaxIntensity">
                                <span class="setting-value" id="parallaxIntensityValue">100%</span>
                            </div>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Smooth Scrolling</span>
                                <span class="setting-desc">Enable smooth page scrolling</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="smoothScrolling" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Screen Shake Effects</span>
                                <span class="setting-desc">Enable subtle screen shake animations</span>
                            </label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="screenShake" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">
                                <span class="setting-name">Typewriter Speed</span>
                                <span class="setting-desc">Speed of the hero title typing animation</span>
                            </label>
                            <div class="setting-control">
                                <input type="range" min="50" max="200" value="100" class="setting-slider"
                                    id="typewriterSpeed">
                                <span class="setting-value" id="typewriterSpeedValue">100%</span>
                            </div>
                        </div>



                        <div class="setting-group">
                            <button class="reset-settings-btn" id="resetSettings">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />
                                </svg>
                                Reset All Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ===========================
           FIXED PORTFOLIO SCRIPT WITH MOBILE CURSOR & AUDIO FIXES
           =========================== */

        'use strict';

        // ===========================
        // GLOBAL VARIABLES
        // ===========================

        let scrollSpeed = 0;
        let lastScrollTime = Date.now();
        let lastScrollTop = 0;

        // Audio player variables
        const audioPlayer = document.getElementById('audioPlayer');
        let currentTrack = -1;
        let isPlaying = false;
        let volume = 0.7;
        let hasUserInteracted = false;
        let autoplayAttempted = false;

        // Fixed track data with corrected file paths
        const tracks = [
            {
                title: "Say Slatt Say Ski",
                artist: "Lucki",
                src: "./music/sayslattsayskiLucki.mp3"
            },
            {
                title: "Limerence",
                artist: "Lucki",
                src: "./music/limerenceLucki.mp3"
            },
            {
                title: "Go Hard 2.0",
                artist: "Juice WRLD",
                src: "./music/gohardJuiceWRLD.mp3"
            }
        ];

        // Performance optimization flags
        const isLowEndDevice = navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4;
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isTablet = /iPad|Android(?=.*Mobile)/i.test(navigator.userAgent);
        const isTouch = 'ontouchstart' in window;

        // Device type detection
        const deviceType = (() => {
            if (isMobile && !isTablet) return 'mobile';
            if (isTablet) return 'tablet';
            return 'desktop';
        })();

        // Cached DOM elements
        const elements = {};

        // Loading state
        let isLoadingComplete = false;

        // Settings state
        let currentSettingsSection = 'main';
        let settings = {
            cursor: {
                enabled: true, // Enable for all devices now
                size: 12,
                opacity: 100,
                followerSize: 36
            },
            misc: {
                reducedMotion: prefersReducedMotion || isLowEndDevice,
                autoplayMusic: false,
                showFloatingElements: true,
                showParticles: true,
                showCodeSnippets: true,
                showGeometricShapes: true,
                animationSpeed: isLowEndDevice ? 50 : 100,
                parallaxIntensity: isMobile ? 0 : 100
            }
        };

        // Enhanced floating emoji data for different themes
        const themeEmojis = {
            default: ['üíª', '‚ö°', 'üöÄ', 'üî•', '‚ú®', 'üí°', 'üéØ', 'üåü', '‚≠ê', 'üé®'],
            github: ['üêô', 'üîÄ', 'üìù', 'üîß', '‚öôÔ∏è', 'üìä', 'üéØ', '‚úÖ', 'üöÄ', 'üåü'],
            discord: ['üéÆ', 'üéØ', 'üí¨', 'üîä', 'üéµ', '‚ö°', 'üåü', 'üé™', 'üé≠', 'üé®'],
            spotify: ['üéµ', 'üé∂', 'üéß', 'üé§', 'üé∏', 'ü•Å', 'üéπ', 'üé∫', 'üéª', 'üé™'],
            vscode: ['üíª', '‚å®Ô∏è', 'üñ•Ô∏è', 'üì±', '‚ö°', 'üîß', '‚öôÔ∏è', 'üéØ', 'üìä', 'üöÄ'],
            ocean: ['üåä', 'üê†', 'üêô', 'ü¶à', 'üê¢', 'üå∫', 'üèùÔ∏è', '‚õµ', 'üå¥', 'ü¶ë'],
            jojos: ['üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ', 'üéÄ']
        };

        // Mobile cursor variables
        let mobileCursor = null;
        let touchActive = false;
        let touchTimeout = null;

        // ===========================
        // INITIALIZATION
        // ===========================

        document.addEventListener('DOMContentLoaded', initializeApp);
        window.addEventListener('load', handleWindowLoad);

        function initializeApp() {
            console.log('üöÄ Initializing fixed portfolio app...');
            console.log('Device type:', deviceType);
            console.log('Is mobile:', isMobile);
            console.log('Is tablet:', isTablet);
            console.log('Is touch device:', isTouch);

            cacheElements();
            loadSettings();
            setupDeviceOptimizations();
            initCustomCursor();
            initMobileCursor();
            initNavigation();
            initScrollAnimations();
            initParallax();
            initTypingAnimation();
            init3DTiltEffects();
            initSettingsPanel();
            initThemeSystem();
            initCustomThemeMaker();
            initAudioPlayer();
            initAudioControls();
            initMobileMenu();
            initBackToTop();
            initAdvancedSettings();
            initMobileOptimizations();
            initFloatingEmojis();
            setupUserInteractionDetection();

            // Performance optimization
            if (isLowEndDevice || prefersReducedMotion || settings.misc.reducedMotion) {
                disableHeavyAnimations();
            }

            console.log('‚úÖ Fixed portfolio app initialized successfully');
        }

        function handleWindowLoad() {
            setTimeout(() => {
                isLoadingComplete = true;
                hideLoadingScreen();

                // Try autoplay after loading if enabled and user has interacted
                if (settings.misc.autoplayMusic && hasUserInteracted && !autoplayAttempted) {
                    setTimeout(() => {
                        attemptAutoplay();
                    }, 1000);
                }
            }, 3000); // Reduced from 4500 to 3000
        }

        function setupUserInteractionDetection() {
            const interactionEvents = ['click', 'touchstart', 'keydown', 'scroll'];

            function markUserInteraction() {
                if (!hasUserInteracted) {
                    hasUserInteracted = true;
                    console.log('User interaction detected');

                    // Try autoplay if enabled and not attempted yet
                    if (settings.misc.autoplayMusic && !autoplayAttempted) {
                        attemptAutoplay();
                    }
                }
            }

            interactionEvents.forEach(event => {
                document.addEventListener(event, markUserInteraction, { once: true, passive: true });
            });
        }

        function attemptAutoplay() {
            if (autoplayAttempted || !hasUserInteracted) return;

            autoplayAttempted = true;

            if (tracks.length > 0 && currentTrack === -1) {
                loadTrack(0);
                setTimeout(() => {
                    const playPromise = elements.audioPlayer.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log('Autoplay successful');
                        }).catch(error => {
                            console.log('Autoplay failed:', error);
                            showAudioError('Autoplay blocked by browser. Click play to start music.');
                        });
                    }
                }, 500);
            }
        }

        function cacheElements() {
            elements.loadingScreen = document.getElementById('loadingScreen');
            elements.navbar = document.getElementById('navbar');
            elements.cursor = document.querySelector('.custom-cursor');
            elements.follower = document.querySelector('.cursor-follower');
            elements.mobileCursor = document.querySelector('.mobile-cursor');
            elements.heroTitle = document.querySelector('.hero-title');
            elements.settingsBtn = document.getElementById('settingsBtn');
            elements.settingsMenu = document.getElementById('settingsMenu');
            elements.settingsMainMenu = document.getElementById('settingsMainMenu');
            elements.settingsCloseBtn = document.getElementById('settingsCloseBtn');
            elements.mobileMenuBtn = document.getElementById('mobileMenuBtn');
            elements.mobileMenu = document.getElementById('mobileMenu');
            elements.audioPlayer = document.getElementById('audioPlayer');
            elements.playPauseBtn = document.getElementById('playPauseBtn');
            elements.prevBtn = document.getElementById('prevBtn');
            elements.nextBtn = document.getElementById('nextBtn');
            elements.progressBar = document.getElementById('progressBar');
            elements.progressFill = document.getElementById('progressFill');
            elements.volumeSlider = document.getElementById('volumeSlider');
            elements.volumeSliderFill = document.getElementById('volumeSliderFill');
            elements.currentTime = document.getElementById('currentTime');
            elements.duration = document.getElementById('duration');
            elements.currentTrackTitle = document.getElementById('currentTrackTitle');
            elements.currentTrackArtist = document.getElementById('currentTrackArtist');
            elements.audioError = document.getElementById('audioError');
            elements.playlist = document.getElementById('playlist');
            elements.primaryColorPicker = document.getElementById('primaryColor');
            elements.accentColorPicker = document.getElementById('accentColor');
            elements.applyCustomThemeBtn = document.getElementById('applyCustomTheme');
            elements.backToTop = document.getElementById('backToTop');

            // Settings elements
            elements.mouseSection = document.getElementById('mouseSection');
            elements.themeSection = document.getElementById('themeSection');
            elements.musicSection = document.getElementById('musicSection');
            elements.miscSection = document.getElementById('miscSection');

            // Cursor settings
            elements.cursorEnabled = document.getElementById('cursorEnabled');
            elements.cursorSize = document.getElementById('cursorSize');
            elements.cursorSizeValue = document.getElementById('cursorSizeValue');
            elements.cursorOpacity = document.getElementById('cursorOpacity');
            elements.cursorOpacityValue = document.getElementById('cursorOpacityValue');
            elements.followerSize = document.getElementById('followerSize');
            elements.followerSizeValue = document.getElementById('followerSizeValue');

            // Enhanced misc settings
            elements.reducedMotion = document.getElementById('reducedMotion');
            elements.autoplayMusic = document.getElementById('autoplayMusic');
            elements.showFloatingElements = document.getElementById('showFloatingElements');
            elements.showParticles = document.getElementById('showParticles');
            elements.showCodeSnippets = document.getElementById('showCodeSnippets');
            elements.showGeometricShapes = document.getElementById('showGeometricShapes');
            elements.animationSpeed = document.getElementById('animationSpeed');
            elements.animationSpeedValue = document.getElementById('animationSpeedValue');
            elements.resetSettings = document.getElementById('resetSettings');
        }

        // ===========================
        // MOBILE CURSOR IMPLEMENTATION
        // ===========================

        function initMobileCursor() {
            if (!elements.mobileCursor) {
                // Create mobile cursor if it doesn't exist
                mobileCursor = document.createElement('div');
                mobileCursor.className = 'mobile-cursor';
                document.body.appendChild(mobileCursor);
                elements.mobileCursor = mobileCursor;
            }

            if (isTouch) {
                // Touch events for mobile cursor
                document.addEventListener('touchstart', handleTouchStart, { passive: false });
                document.addEventListener('touchmove', handleTouchMove, { passive: false });
                document.addEventListener('touchend', handleTouchEnd, { passive: false });
            }

            updateCursorVisibility();
        }

        function handleTouchStart(e) {
            if (!settings.cursor.enabled) return;

            const touch = e.touches[0];
            showMobileCursor(touch.clientX, touch.clientY);
            touchActive = true;

            // Clear any existing timeout
            if (touchTimeout) {
                clearTimeout(touchTimeout);
                touchTimeout = null;
            }
        }

        function handleTouchMove(e) {
            if (!settings.cursor.enabled || !touchActive) return;

            const touch = e.touches[0];
            updateMobileCursorPosition(touch.clientX, touch.clientY);
        }

        function handleTouchEnd(e) {
            if (!settings.cursor.enabled) return;

            touchActive = false;

            // Hide cursor after a delay
            touchTimeout = setTimeout(() => {
                hideMobileCursor();
            }, 1000);
        }

        function showMobileCursor(x, y) {
            if (!elements.mobileCursor) return;

            elements.mobileCursor.style.display = 'block';
            elements.mobileCursor.style.opacity = settings.cursor.opacity / 100;
            updateMobileCursorPosition(x, y);
        }

        function updateMobileCursorPosition(x, y) {
            if (!elements.mobileCursor) return;

            const size = settings.cursor.size;
            elements.mobileCursor.style.transform = `translate3d(${x - size / 2}px, ${y - size / 2}px, 0)`;
        }

        function hideMobileCursor() {
            if (!elements.mobileCursor) return;

            elements.mobileCursor.style.opacity = '0';
            setTimeout(() => {
                if (elements.mobileCursor) {
                    elements.mobileCursor.style.display = 'none';
                }
            }, 300);
        }

        function updateCursorVisibility() {
            const showCustomCursor = settings.cursor.enabled;

            if (isMobile || isTouch) {
                // Mobile/touch devices
                if (elements.cursor) elements.cursor.style.display = 'none';
                if (elements.follower) elements.follower.style.display = 'none';
                if (elements.mobileCursor) {
                    elements.mobileCursor.style.display = showCustomCursor ? 'block' : 'none';
                }
                document.body.style.cursor = 'auto';
            } else {
                // Desktop devices
                if (elements.cursor) {
                    elements.cursor.style.display = showCustomCursor ? 'block' : 'none';
                }
                if (elements.follower) {
                    elements.follower.style.display = showCustomCursor ? 'block' : 'none';
                }
                if (elements.mobileCursor) elements.mobileCursor.style.display = 'none';
                document.body.style.cursor = showCustomCursor ? 'none' : 'auto';
            }
        }

        // ===========================
        // FLOATING EMOJIS SYSTEM (FIXED)
        // ===========================

        function initFloatingEmojis() {
            // Always create floating emojis early in the loading process
            setTimeout(() => {
                createFloatingEmojis();
            }, 500); // Load early

            // Update emojis when theme changes
            document.addEventListener('themeChanged', updateFloatingEmojis);
        }

        function createFloatingEmojis() {
            // Remove existing emoji elements
            document.querySelectorAll('.floating-emoji').forEach(el => el.remove());

            if (!settings.misc.showFloatingElements) return;

            const currentTheme = document.body.getAttribute('data-theme') || 'default';
            const emojis = themeEmojis[currentTheme] || themeEmojis.default;

            // Create emoji containers for each section
            const sections = [
                { selector: '.hero-section', container: '.floating-elements' },
                { selector: '.about-section', container: null },
                { selector: '.skills-section', container: null },
                { selector: '.projects-section', container: null },
                { selector: '.contact-section', container: null }
            ];

            sections.forEach((section, sectionIndex) => {
                const sectionElement = document.querySelector(section.selector);
                if (!sectionElement) return;

                let container;
                if (section.container) {
                    container = sectionElement.querySelector(section.container);
                } else {
                    // Create floating container for sections without one
                    container = document.createElement('div');
                    container.className = 'floating-elements emoji-container';
                    container.style.position = 'absolute';
                    container.style.top = '0';
                    container.style.left = '0';
                    container.style.width = '100%';
                    container.style.height = '100%';
                    container.style.overflow = 'hidden';
                    container.style.pointerEvents = 'none';
                    container.style.zIndex = '1';
                    container.style.display = 'block';
                    sectionElement.style.position = 'relative';
                    sectionElement.appendChild(container);
                }

                if (!container) return;

                // Number of emojis per section
                const emojiCount = isMobile ?
                    (currentTheme === 'jojos' ? 15 : 10) :
                    (currentTheme === 'jojos' ? 12 : 8);

                for (let i = 0; i < emojiCount; i++) {
                    const emoji = document.createElement('div');
                    emoji.className = `floating-emoji ${currentTheme}-${i + 1}`;
                    emoji.textContent = emojis[i % emojis.length];

                    // Random positioning
                    const startX = Math.random() * 90;
                    const startY = Math.random() * 90;

                    emoji.style.position = 'absolute';
                    emoji.style.left = startX + '%';
                    emoji.style.top = startY + '%';
                    emoji.style.pointerEvents = 'none';
                    emoji.style.userSelect = 'none';
                    emoji.style.zIndex = '1';

                    // Enhanced mobile visibility with proper infinite animation
                    if (isMobile) {
                        emoji.style.fontSize = (Math.random() * 0.8 + 1.5) + 'rem';
                        emoji.style.opacity = Math.random() * 0.3 + 0.7;
                    } else {
                        emoji.style.fontSize = (Math.random() * 0.5 + 1) + 'rem';
                        emoji.style.opacity = Math.random() * 0.4 + 0.4;
                    }

                    // Set unique animation with proper infinite loop
                    const animationDuration = Math.random() * 20 + 30; // 30-50 seconds
                    const animationDelay = Math.random() * 10; // 0-10 seconds delay

                    emoji.style.animationName = 'float-emoji-infinite';
                    emoji.style.animationDuration = animationDuration + 's';
                    emoji.style.animationDelay = animationDelay + 's';
                    emoji.style.animationTimingFunction = 'ease-in-out';
                    emoji.style.animationIterationCount = 'infinite';
                    emoji.style.animationFillMode = 'forwards';

                    container.appendChild(emoji);
                }
            });
        }

        function updateFloatingEmojis() {
            if (!settings.misc.showFloatingElements) {
                return;
            }

            // Smooth transition: fade out old emojis, create new ones
            const existingEmojis = document.querySelectorAll('.floating-emoji');
            existingEmojis.forEach(emoji => {
                emoji.style.transition = 'opacity 0.5s ease-out';
                emoji.style.opacity = '0';
            });

            setTimeout(() => {
                createFloatingEmojis();
            }, 500);
        }

        function removeFloatingEmojis() {
            document.querySelectorAll('.floating-emoji').forEach(el => el.remove());
            document.querySelectorAll('.emoji-container').forEach(el => el.remove());
        }

        // ===========================
        // DEVICE OPTIMIZATIONS
        // ===========================

        function setupDeviceOptimizations() {
            // Add device-specific classes
            document.body.classList.add(`device-${deviceType}`);

            if (isMobile) {
                document.body.classList.add('mobile-device');
            }

            if (isTouch) {
                document.body.classList.add('touch-device');
            }

            if (isLowEndDevice) {
                document.body.classList.add('low-end-device');
            }
        }

        function initMobileOptimizations() {
            if (isMobile) {
                // Optimize viewport
                const viewport = document.querySelector('meta[name="viewport"]');
                if (viewport) {
                    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
                }

                // Prevent bounce scrolling on iOS
                document.body.addEventListener('touchmove', (e) => {
                    if (e.target === document.body) {
                        e.preventDefault();
                    }
                }, { passive: false });

                // Add visual feedback for touch interactions
                addTouchFeedback();
            }
        }

        function addTouchFeedback() {
            const touchElements = document.querySelectorAll('button, .nav-link, .mobile-nav-link, .contact-link, .project-link, .settings-category, .theme-option, .playlist-item, .control-btn');

            touchElements.forEach(element => {
                element.addEventListener('touchstart', function () {
                    this.style.transform = 'scale(0.95)';
                }, { passive: true });

                element.addEventListener('touchend', function () {
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                }, { passive: true });
            });
        }

        // ===========================
        // SETTINGS MANAGEMENT (ENHANCED)
        // ===========================

        function loadSettings() {
            const savedSettings = localStorage.getItem('portfolio-settings');
            if (savedSettings) {
                try {
                    const parsed = JSON.parse(savedSettings);
                    settings = { ...settings, ...parsed };
                } catch (e) {
                    console.warn('Failed to parse saved settings:', e);
                }
            }

            applyLoadedSettings();
        }

        function saveSettings() {
            try {
                localStorage.setItem('portfolio-settings', JSON.stringify(settings));
            } catch (e) {
                console.warn('Failed to save settings:', e);
            }
        }

        function applyLoadedSettings() {
            // Apply cursor settings
            if (settings.cursor) {
                updateCursorVariables();
                updateCursorVisibility();
            }

            // Apply misc settings
            if (settings.misc) {
                if (settings.misc.reducedMotion) {
                    disableHeavyAnimations();
                }

                updateFloatingElementsVisibility();
                updateAnimationSpeed();
                updateParallaxIntensity();
            }
        }

        function updateCursorVariables() {
            const root = document.documentElement;
            root.style.setProperty('--cursor-size', settings.cursor.size + 'px');
            root.style.setProperty('--cursor-opacity', settings.cursor.opacity / 100);
            root.style.setProperty('--follower-size', settings.cursor.followerSize + 'px');
        }

        function updateFloatingElementsVisibility() {
            const floatingElements = document.querySelectorAll('.floating-element');
            const codeSnippets = document.querySelectorAll('.floating-code');
            const geometricShapes = document.querySelectorAll('.geometric-shape');
            const particles = document.querySelectorAll('.floating-tech-icon, .floating-symbols, .floating-contact-icons');
            const emojis = document.querySelectorAll('.floating-emoji');

            // Show/hide all floating elements
            floatingElements.forEach(el => {
                el.style.display = settings.misc.showFloatingElements ? '' : 'none';
            });

            // Show/hide emojis
            emojis.forEach(el => {
                el.style.display = settings.misc.showFloatingElements ? '' : 'none';
            });

            // Show/hide specific element types
            if (settings.misc.showFloatingElements) {
                codeSnippets.forEach(el => {
                    el.style.display = settings.misc.showCodeSnippets ? '' : 'none';
                });

                geometricShapes.forEach(el => {
                    el.style.display = settings.misc.showGeometricShapes ? '' : 'none';
                });

                particles.forEach(el => {
                    el.style.display = settings.misc.showParticles ? '' : 'none';
                });
            }
        }

        function updateAnimationSpeed() {
            const root = document.documentElement;
            const speed = settings.misc.animationSpeed / 100;
            root.style.setProperty('--animation-speed', speed);
        }

        function updateParallaxIntensity() {
            const root = document.documentElement;
            const intensity = settings.misc.parallaxIntensity / 100;
            root.style.setProperty('--parallax-intensity', intensity);
        }

        function resetAllSettings() {
            if (confirm('Are you sure you want to reset all settings to default? This action cannot be undone.')) {
                localStorage.removeItem('portfolio-settings');
                localStorage.removeItem('preferred-theme');
                localStorage.removeItem('custom-theme');

                // Reset to defaults
                settings = {
                    cursor: {
                        enabled: true,
                        size: 12,
                        opacity: 100,
                        followerSize: 36
                    },
                    misc: {
                        reducedMotion: prefersReducedMotion || isLowEndDevice,
                        autoplayMusic: false,
                        showFloatingElements: true,
                        showParticles: true,
                        showCodeSnippets: true,
                        showGeometricShapes: true,
                        animationSpeed: isLowEndDevice ? 50 : 100,
                        parallaxIntensity: isMobile ? 0 : 100
                    }
                };

                // Reload page to apply all changes
                location.reload();
            }
        }

        // ===========================
        // ENHANCED SETTINGS SYSTEM
        // ===========================

        function initAdvancedSettings() {
            initSettingsNavigation();
            initCursorSettings();
            initEnhancedMiscSettings();
            populateSettingsValues();
        }

        function initSettingsNavigation() {
            // Category navigation
            const settingsCategories = document.querySelectorAll('.settings-category');
            settingsCategories.forEach(category => {
                category.addEventListener('click', () => {
                    const section = category.getAttribute('data-section');
                    if (section) {
                        showSettingsSection(section);
                    }
                });
            });

            // Back buttons
            const backButtons = document.querySelectorAll('.settings-back-btn');
            backButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const target = btn.getAttribute('data-back');
                    if (target === 'main') {
                        showSettingsSection('main');
                    }
                });
            });

            // Close button for mobile
            if (elements.settingsCloseBtn) {
                elements.settingsCloseBtn.addEventListener('click', closeSettings);
            }
        }

        function showSettingsSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.settings-section-view').forEach(section => {
                section.classList.remove('active');
            });

            // Toggle visibility based on what was clicked
            if (sectionName === 'main') {
                elements.settingsMainMenu.classList.add('active');
            } else {
                elements.settingsMainMenu.classList.remove('active');

                const target = document.getElementById(sectionName + 'Section');
                if (target) {
                    target.classList.add('active');
                }
            }

            currentSettingsSection = sectionName;

            // Scroll to top for better UX
            const scrollContainer = document.querySelector('.settings-scroll-container');
            if (scrollContainer) {
                scrollContainer.scrollTop = 0;
            }
        }

        function initCursorSettings() {
            if (!elements.cursorEnabled) return;

            // Cursor enabled toggle
            elements.cursorEnabled.addEventListener('change', (e) => {
                settings.cursor.enabled = e.target.checked;
                updateCursorVisibility();
                saveSettings();
            });

            // Cursor size slider
            if (elements.cursorSize) {
                elements.cursorSize.addEventListener('input', (e) => {
                    settings.cursor.size = parseInt(e.target.value);
                    if (elements.cursorSizeValue) {
                        elements.cursorSizeValue.textContent = settings.cursor.size + 'px';
                    }
                    updateCursorVariables();
                    saveSettings();
                });
            }

            // Cursor opacity slider
            if (elements.cursorOpacity) {
                elements.cursorOpacity.addEventListener('input', (e) => {
                    settings.cursor.opacity = parseInt(e.target.value);
                    if (elements.cursorOpacityValue) {
                        elements.cursorOpacityValue.textContent = settings.cursor.opacity + '%';
                    }
                    updateCursorVariables();
                    saveSettings();
                });
            }

            // Follower size slider
            if (elements.followerSize) {
                elements.followerSize.addEventListener('input', (e) => {
                    settings.cursor.followerSize = parseInt(e.target.value);
                    if (elements.followerSizeValue) {
                        elements.followerSizeValue.textContent = settings.cursor.followerSize + 'px';
                    }
                    updateCursorVariables();
                    saveSettings();
                });
            }
        }

        function initEnhancedMiscSettings() {
            if (!elements.reducedMotion) return;

            // Reduced motion toggle
            elements.reducedMotion.addEventListener('change', (e) => {
                settings.misc.reducedMotion = e.target.checked;

                if (settings.misc.reducedMotion) {
                    disableHeavyAnimations();
                } else {
                    enableHeavyAnimations();
                }

                saveSettings();
            });

            // Autoplay music toggle
            if (elements.autoplayMusic) {
                elements.autoplayMusic.addEventListener('change', (e) => {
                    settings.misc.autoplayMusic = e.target.checked;
                    saveSettings();
                });
            }

            // Show floating elements toggle
            if (elements.showFloatingElements) {
                elements.showFloatingElements.addEventListener('change', (e) => {
                    settings.misc.showFloatingElements = e.target.checked;
                    updateFloatingElementsVisibility();

                    if (e.target.checked) {
                        initFloatingEmojis();
                    } else {
                        removeFloatingEmojis();
                    }

                    saveSettings();
                });
            }

            // Show particles toggle
            if (elements.showParticles) {
                elements.showParticles.addEventListener('change', (e) => {
                    settings.misc.showParticles = e.target.checked;
                    updateFloatingElementsVisibility();
                    saveSettings();
                });
            }

            // Show code snippets toggle
            if (elements.showCodeSnippets) {
                elements.showCodeSnippets.addEventListener('change', (e) => {
                    settings.misc.showCodeSnippets = e.target.checked;
                    updateFloatingElementsVisibility();
                    saveSettings();
                });
            }

            // Show geometric shapes toggle
            if (elements.showGeometricShapes) {
                elements.showGeometricShapes.addEventListener('change', (e) => {
                    settings.misc.showGeometricShapes = e.target.checked;
                    updateFloatingElementsVisibility();
                    saveSettings();
                });
            }

            // Animation speed slider
            if (elements.animationSpeed) {
                elements.animationSpeed.addEventListener('input', (e) => {
                    settings.misc.animationSpeed = parseInt(e.target.value);
                    if (elements.animationSpeedValue) {
                        elements.animationSpeedValue.textContent = settings.misc.animationSpeed + '%';
                    }
                    updateAnimationSpeed();
                    saveSettings();
                });
            }

            // Reset settings button
            if (elements.resetSettings) {
                elements.resetSettings.addEventListener('click', resetAllSettings);
            }
        }

        function populateSettingsValues() {
            // Populate cursor settings
            if (elements.cursorEnabled) {
                elements.cursorEnabled.checked = settings.cursor.enabled;
            }

            if (elements.cursorSize) {
                elements.cursorSize.value = settings.cursor.size;
                if (elements.cursorSizeValue) {
                    elements.cursorSizeValue.textContent = settings.cursor.size + 'px';
                }
            }

            if (elements.cursorOpacity) {
                elements.cursorOpacity.value = settings.cursor.opacity;
                if (elements.cursorOpacityValue) {
                    elements.cursorOpacityValue.textContent = settings.cursor.opacity + '%';
                }
            }

            if (elements.followerSize) {
                elements.followerSize.value = settings.cursor.followerSize;
                if (elements.followerSizeValue) {
                    elements.followerSizeValue.textContent = settings.cursor.followerSize + 'px';
                }
            }

            // Populate misc settings
            if (elements.reducedMotion) {
                elements.reducedMotion.checked = settings.misc.reducedMotion;
            }

            if (elements.autoplayMusic) {
                elements.autoplayMusic.checked = settings.misc.autoplayMusic;
            }

            if (elements.showFloatingElements) {
                elements.showFloatingElements.checked = settings.misc.showFloatingElements;
            }

            if (elements.showParticles) {
                elements.showParticles.checked = settings.misc.showParticles;
            }

            if (elements.showCodeSnippets) {
                elements.showCodeSnippets.checked = settings.misc.showCodeSnippets;
            }

            if (elements.showGeometricShapes) {
                elements.showGeometricShapes.checked = settings.misc.showGeometricShapes;
            }

            if (elements.animationSpeed) {
                elements.animationSpeed.value = settings.misc.animationSpeed;
                if (elements.animationSpeedValue) {
                    elements.animationSpeedValue.textContent = settings.misc.animationSpeed + '%';
                }
            }
        }

        function enableHeavyAnimations() {
            updateFloatingElementsVisibility();
            updateAnimationSpeed();

            // Re-initialize emojis if floating elements are enabled
            if (settings.misc.showFloatingElements) {
                initFloatingEmojis();
            }
        }

        function disableHeavyAnimations() {
            const heavyAnimationElements = document.querySelectorAll('.floating-element, .floating-emoji');

            heavyAnimationElements.forEach(el => {
                el.style.animation = 'none';
                el.style.display = 'none';
            });

            // Update settings state
            settings.misc.showFloatingElements = false;
            settings.misc.showParticles = false;
            settings.misc.showCodeSnippets = false;
            settings.misc.showGeometricShapes = false;

            updateFloatingElementsVisibility();
            removeFloatingEmojis();
        }

        // ===========================
        // LOADING SCREEN
        // ===========================

        function hideLoadingScreen() {
            if (elements.loadingScreen) {
                elements.loadingScreen.classList.add('fade-out');

                // Remove from DOM after animation completes
                setTimeout(() => {
                    if (elements.loadingScreen.parentNode) {
                        elements.loadingScreen.parentNode.removeChild(elements.loadingScreen);
                    }
                }, 1000);
            }
        }

        // ===========================
        // BACK TO TOP FUNCTIONALITY
        // ===========================

        function initBackToTop() {
            if (!elements.backToTop) return;

            // Show/hide button based on scroll position
            window.addEventListener('scroll', throttle(() => {
                if (window.pageYOffset > 300) {
                    elements.backToTop.classList.add('show');
                } else {
                    elements.backToTop.classList.remove('show');
                }
            }, 100), { passive: true });

            // Smooth scroll to top when clicked
            elements.backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // ===========================
        // MOBILE MENU (ENHANCED)
        // ===========================

        function initMobileMenu() {
            if (!elements.mobileMenuBtn || !elements.mobileMenu) return;

            elements.mobileMenuBtn.addEventListener('click', toggleMobileMenu);

            // Close mobile menu when clicking nav links
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    closeMobileMenu();
                });
            });

            // Close mobile menu when clicking outside
            elements.mobileMenu.addEventListener('click', (e) => {
                if (e.target === elements.mobileMenu) {
                    closeMobileMenu();
                }
            });

            // Handle escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && elements.mobileMenu.classList.contains('active')) {
                    closeMobileMenu();
                }
            });
        }

        function toggleMobileMenu() {
            const isActive = elements.mobileMenu.classList.contains('active');

            if (isActive) {
                closeMobileMenu();
            } else {
                openMobileMenu();
            }
        }

        function openMobileMenu() {
            elements.mobileMenuBtn.classList.add('active');
            elements.mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Focus management for accessibility
            elements.mobileMenu.focus();
        }

        function closeMobileMenu() {
            elements.mobileMenuBtn.classList.remove('active');
            elements.mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
        }

        // ===========================
        // AUDIO PLAYER FUNCTIONS (FIXED)
        // ===========================

        function initAudioPlayer() {
            if (!elements.audioPlayer) return;

            elements.audioPlayer.volume = volume;
            updateVolumeDisplay();

            // Audio event listeners with fixed handling
            elements.audioPlayer.addEventListener('loadedmetadata', handleMetadataLoaded);
            elements.audioPlayer.addEventListener('timeupdate', throttle(handleTimeUpdate, 100));
            elements.audioPlayer.addEventListener('ended', handleTrackEnded);
            elements.audioPlayer.addEventListener('error', handleAudioError);
            elements.audioPlayer.addEventListener('canplay', hideAudioError);
            elements.audioPlayer.addEventListener('play', () => setPlayButtonState(true));
            elements.audioPlayer.addEventListener('pause', () => setPlayButtonState(false));

            // Better error handling for load failures
            elements.audioPlayer.addEventListener('loadstart', () => {
                console.log('Audio loading started...');
            });

            elements.audioPlayer.addEventListener('canplaythrough', () => {
                console.log('Audio can play through');
                hideAudioError();
            });
        }

        function handleMetadataLoaded() {
            if (elements.duration) {
                elements.duration.textContent = formatTime(elements.audioPlayer.duration);
            }
            console.log('Metadata loaded successfully');
        }

        function handleTimeUpdate() {
            if (elements.audioPlayer.duration && elements.progressFill && elements.currentTime) {
                const progressPercent = (elements.audioPlayer.currentTime / elements.audioPlayer.duration) * 100;
                elements.progressFill.style.width = progressPercent + '%';
                elements.currentTime.textContent = formatTime(elements.audioPlayer.currentTime);
            }
        }

        function handleTrackEnded() {
            nextTrack();
        }

        function handleAudioError(e) {
            const error = e.target.error;
            let errorMessage = 'Audio file could not be loaded. ';

            if (error) {
                switch (error.code) {
                    case error.MEDIA_ERR_ABORTED:
                        errorMessage += 'Playback was aborted.';
                        break;
                    case error.MEDIA_ERR_NETWORK:
                        errorMessage += 'Network error occurred.';
                        break;
                    case error.MEDIA_ERR_DECODE:
                        errorMessage += 'Audio file format not supported.';
                        break;
                    case error.MEDIA_ERR_SRC_NOT_SUPPORTED:
                        errorMessage += 'Audio file not found or format not supported.';
                        break;
                    default:
                        errorMessage += 'Unknown error occurred.';
                        break;
                }
            }

            console.error('Audio error:', errorMessage, 'Track:', currentTrack >= 0 ? tracks[currentTrack].src : 'none');
            showAudioError(errorMessage);
            setPlayButtonState(false);
        }

        function showAudioError(message = null) {
            if (elements.audioError) {
                if (message) {
                    elements.audioError.textContent = message;
                }
                elements.audioError.classList.remove('hidden');
            }
        }

        function hideAudioError() {
            if (elements.audioError) {
                elements.audioError.classList.add('hidden');
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function setPlayButtonState(playing) {
            if (elements.playPauseBtn) {
                const playIcon = elements.playPauseBtn.querySelector('.play-icon');
                const pauseIcon = elements.playPauseBtn.querySelector('.pause-icon');

                if (playIcon && pauseIcon) {
                    if (playing) {
                        playIcon.classList.add('hidden');
                        pauseIcon.classList.remove('hidden');
                    } else {
                        playIcon.classList.remove('hidden');
                        pauseIcon.classList.add('hidden');
                    }
                }
            }
            isPlaying = playing;
        }

        function loadTrack(trackIndex) {
            if (trackIndex < 0 || trackIndex >= tracks.length) return;

            currentTrack = trackIndex;
            const track = tracks[trackIndex];

            console.log('Loading track:', track.title, 'from:', track.src);

            // Update UI
            if (elements.currentTrackTitle) elements.currentTrackTitle.textContent = track.title;
            if (elements.currentTrackArtist) elements.currentTrackArtist.textContent = track.artist;

            // Update playlist active state
            updatePlaylistActiveState(trackIndex);

            // Load audio with better error handling
            try {
                elements.audioPlayer.src = track.src;
                elements.audioPlayer.load();
                hideAudioError();
            } catch (error) {
                console.error('Error loading track:', error);
                showAudioError('Failed to load audio file: ' + track.title);
            }

            // Reset progress
            resetProgressDisplay();
        }

        function updatePlaylistActiveState(activeIndex) {
            document.querySelectorAll('.playlist-item').forEach((item, index) => {
                item.classList.toggle('active', index === activeIndex);
            });
        }

        function resetProgressDisplay() {
            if (elements.progressFill) elements.progressFill.style.width = '0%';
            if (elements.currentTime) elements.currentTime.textContent = '0:00';
            if (elements.duration) elements.duration.textContent = '0:00';
        }

        function togglePlayPause() {
            // Mark user interaction
            hasUserInteracted = true;

            if (currentTrack === -1) {
                loadTrack(0);
                return;
            }

            if (isPlaying) {
                elements.audioPlayer.pause();
            } else {
                const playPromise = elements.audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.error('Play failed:', error);
                        showAudioError('Playback failed. Please check if the audio file exists.');
                    });
                }
            }
        }

        function nextTrack() {
            const nextIndex = (currentTrack + 1) % tracks.length;
            loadTrack(nextIndex);
            if (isPlaying) {
                setTimeout(() => {
                    elements.audioPlayer.play().catch(e => {
                        console.error('Auto-play failed:', e);
                        showAudioError('Auto-play failed. Please try playing manually.');
                    });
                }, 100);
            }
        }

        function prevTrack() {
            const prevIndex = currentTrack === 0 ? tracks.length - 1 : currentTrack - 1;
            loadTrack(prevIndex);
            if (isPlaying) {
                setTimeout(() => {
                    elements.audioPlayer.play().catch(e => {
                        console.error('Auto-play failed:', e);
                        showAudioError('Auto-play failed. Please try playing manually.');
                    });
                }, 100);
            }
        }

        function seekTo(event) {
            if (elements.audioPlayer.duration) {
                const rect = elements.progressBar.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const percentage = clickX / rect.width;
                elements.audioPlayer.currentTime = elements.audioPlayer.duration * percentage;
            }
        }

        function setVolume(value) {
            volume = Math.max(0, Math.min(1, value / 100));
            elements.audioPlayer.volume = volume;
            updateVolumeDisplay();
        }

        function updateVolumeDisplay() {
            if (elements.volumeSliderFill) {
                elements.volumeSliderFill.style.width = (volume * 100) + '%';
            }

            if (elements.volumeSlider) {
                elements.volumeSlider.value = volume * 100;
            }

            // Update volume icon based on level
            const volumeIcon = document.querySelector('.volume-icon-container svg');
            if (volumeIcon) {
                const paths = volumeIcon.querySelectorAll('path');
                paths.forEach(path => {
                    if (volume === 0) {
                        path.setAttribute('d', 'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z');
                    } else if (volume < 0.5) {
                        path.setAttribute('d', 'M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z');
                    } else {
                        path.setAttribute('d', 'M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z');
                    }
                });
            }
        }

        // ===========================
        // CUSTOM CURSOR (ENHANCED FOR DESKTOP)
        // ===========================

        function initCustomCursor() {
            // Only initialize desktop cursor on non-touch devices
            if (!elements.cursor || !elements.follower || isTouch) {
                return;
            }

            let mouseX = 0, mouseY = 0;
            let followerX = 0, followerY = 0;
            let isMoving = false;

            // Optimized mouse move handler with RAF
            document.addEventListener('mousemove', throttle((e) => {
                if (!settings.cursor.enabled) return;

                mouseX = e.clientX;
                mouseY = e.clientY;
                isMoving = true;

                const halfSize = settings.cursor.size / 2;
                elements.cursor.style.transform = `translate3d(${mouseX - halfSize}px, ${mouseY - halfSize}px, 0)`;
            }, 16), { passive: true });

            // Smooth follower animation with RAF
            function animateFollower() {
                if (isMoving && settings.cursor.enabled) {
                    followerX += (mouseX - followerX) * 0.08;
                    followerY += (mouseY - followerY) * 0.08;

                    const halfFollowerSize = settings.cursor.followerSize / 2;
                    elements.follower.style.transform = `translate3d(${followerX - halfFollowerSize}px, ${followerY - halfFollowerSize}px, 0)`;
                }

                requestAnimationFrame(animateFollower);
            }
            animateFollower();

            // Enhanced hover effects for interactive elements
            const hoverElements = document.querySelectorAll('a, button, .skill-card, .project-card, .timeline-content, .logo-container, .theme-option, .playlist-item, .control-btn, .settings-category, input[type="range"], .toggle-switch');

            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    if (elements.cursor && elements.follower && settings.cursor.enabled) {
                        elements.cursor.style.transform += ' scale(1.5)';
                        elements.follower.style.transform += ' scale(1.5)';
                        elements.follower.style.opacity = '0.8';
                    }
                });

                el.addEventListener('mouseleave', () => {
                    if (elements.cursor && elements.follower && settings.cursor.enabled) {
                        elements.cursor.style.transform = elements.cursor.style.transform.replace(' scale(1.5)', '');
                        elements.follower.style.transform = elements.follower.style.transform.replace(' scale(1.5)', '');
                        elements.follower.style.opacity = 'calc(var(--cursor-opacity) * 0.6)';
                    }
                });
            });

            // Hide cursor when leaving viewport
            document.addEventListener('mouseleave', () => {
                if (elements.cursor && elements.follower) {
                    elements.cursor.style.opacity = '0';
                    elements.follower.style.opacity = '0';
                }
            });

            document.addEventListener('mouseenter', () => {
                if (elements.cursor && elements.follower && settings.cursor.enabled) {
                    elements.cursor.style.opacity = 'var(--cursor-opacity)';
                    elements.follower.style.opacity = 'calc(var(--cursor-opacity) * 0.6)';
                }
            });
        }

        // ===========================
        // NAVIGATION & SCROLLING (ENHANCED)
        // ===========================

        function initNavigation() {
            // Optimized scroll handler with passive listener
            window.addEventListener('scroll', throttle(handleScroll, 16), { passive: true });

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', handleAnchorClick);
            });
        }

        function handleScroll() {
            const currentTime = Date.now();
            const currentScrollTop = window.pageYOffset;

            const timeDelta = currentTime - lastScrollTime;
            const scrollDelta = Math.abs(currentScrollTop - lastScrollTop);
            scrollSpeed = scrollDelta / timeDelta;

            lastScrollTime = currentTime;
            lastScrollTop = currentScrollTop;

            // Update navbar with enhanced animation
            if (elements.navbar) {
                if (currentScrollTop > 100) {
                    elements.navbar.classList.add('scrolled');
                } else {
                    elements.navbar.classList.remove('scrolled');
                }
            }
        }

        function handleAnchorClick(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                // Close mobile menu if open
                closeMobileMenu();

                // Close settings if open
                closeSettings();

                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // ===========================
        // SCROLL ANIMATIONS (ENHANCED)
        // ===========================

        function initScrollAnimations() {
            const observerOptions = {
                threshold: isMobile ? 0.1 : 0.05,
                rootMargin: isMobile ? '20px 0px -20px 0px' : '0px 0px -10px 0px'
            };

            const observer = new IntersectionObserver(handleIntersection, observerOptions);

            document.querySelectorAll('.animate-on-scroll').forEach((el, index) => {
                el.dataset.delay = isMobile ? Math.min(index * 25, 150) : index * 50;
                observer.observe(el);
            });
        }

        function handleIntersection(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const delay = scrollSpeed > 2 ? 0 : Math.min(entry.target.dataset.delay || 0, isMobile ? 150 : 300);

                    setTimeout(() => {
                        entry.target.classList.add('animated');

                        // Animate numbers if present
                        const statNumbers = entry.target.querySelectorAll('.stat-number[data-target]');
                        if (statNumbers.length > 0) {
                            animateNumbers(statNumbers);
                        }
                    }, delay);
                }
            });
        }

        function animateNumbers(numbers) {
            numbers.forEach(num => {
                const target = parseInt(num.getAttribute('data-target'));
                let current = 0;
                const increment = target / (isMobile ? 30 : 50);
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    num.textContent = Math.floor(current) + (target > 10 ? '+' : '');
                }, isMobile ? 60 : 40);
            });
        }

        // ===========================
        // PARALLAX EFFECTS (DESKTOP ONLY)
        // ===========================

        function initParallax() {
            if (isLowEndDevice || prefersReducedMotion || isMobile || settings.misc.reducedMotion || settings.misc.parallaxIntensity === 0) return;

            window.addEventListener('scroll', throttle(handleParallax, 16), { passive: true });
        }

        function handleParallax() {
            if (settings.misc.parallaxIntensity === 0) return;

            const scrolled = window.pageYOffset;
            const intensity = settings.misc.parallaxIntensity / 100;
            const shapes = document.querySelectorAll('.geometric-shape');

            shapes.forEach((shape, index) => {
                const speed = (0.2 + (index * 0.1)) * intensity;
                const yPos = scrolled * speed;
                const rotation = scrolled * 0.05 * intensity;
                shape.style.transform = `translate3d(0, ${yPos}px, 0) rotate(${rotation}deg)`;
            });
        }

        // ===========================
        // TYPING ANIMATION (ENHANCED)
        // ===========================

        function initTypingAnimation() {
            if (!elements.heroTitle || prefersReducedMotion || settings.misc.reducedMotion) return;

            const titleText = elements.heroTitle.textContent.trim();
            elements.heroTitle.textContent = '';
            elements.heroTitle.style.opacity = '1';

            setTimeout(() => {
                let i = 0;
                const typeInterval = setInterval(() => {
                    elements.heroTitle.textContent = titleText.slice(0, i);
                    i++;
                    if (i > titleText.length) {
                        clearInterval(typeInterval);
                        elements.heroTitle.textContent = titleText;
                    }
                }, isMobile ? 120 : 100);
            }, 1500);
        }

        // ===========================
        // 3D TILT EFFECTS (DESKTOP ONLY)
        // ===========================

        function init3DTiltEffects() {
            if (isLowEndDevice || prefersReducedMotion || isMobile || isTouch || settings.misc.reducedMotion) return;

            const tiltElements = document.querySelectorAll('.project-card, .skill-card');

            tiltElements.forEach(card => {
                card.addEventListener('mousemove', handleTilt);
                card.addEventListener('mouseleave', resetTilt);
            });
        }

        function handleTilt(e) {
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            const rotateX = (y - centerY) / 15;
            const rotateY = (centerX - x) / 15;

            this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-12px)`;
        }

        function resetTilt() {
            this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0)';
        }

        // ===========================
        // SETTINGS PANEL (ENHANCED MOBILE SUPPORT)
        // ===========================

        function initSettingsPanel() {
            if (!elements.settingsBtn || !elements.settingsMenu) return;

            elements.settingsBtn.addEventListener('click', toggleSettings);

            // Click outside to close (but not on mobile)
            document.addEventListener('click', (e) => {
                if (!isMobile && !elements.settingsBtn.contains(e.target) && !elements.settingsMenu.contains(e.target)) {
                    closeSettings();
                }
            });

            // Enhanced mobile handling
            if (isMobile) {
                // Add touch event handling
                elements.settingsBtn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    toggleSettings();
                });

                // Prevent body scroll when settings open
                elements.settingsMenu.addEventListener('touchmove', (e) => {
                    e.stopPropagation();
                }, { passive: true });
            }

            // Show main menu by default
            showSettingsSection('main');
        }

        function toggleSettings() {
            if (elements.settingsMenu.classList.contains('active')) {
                closeSettings();
            } else {
                openSettings();
            }
        }

        function openSettings() {
            elements.settingsMenu.classList.add('active');
            showSettingsSection('main');

            // Prevent body scroll on mobile when settings are open
            if (isMobile) {
                document.body.style.overflow = 'hidden';
            }
        }

        function closeSettings() {
            elements.settingsMenu.classList.remove('active');

            // Restore body scroll
            if (isMobile) {
                document.body.style.overflow = '';
            }
        }

        // ===========================
        // THEME SYSTEM (ENHANCED WITH JOJOS)
        // ===========================

        function initThemeSystem() {
            const themeOptions = document.querySelectorAll('.theme-option');

            themeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const theme = option.getAttribute('data-theme');
                    if (theme) {
                        setTheme(theme);
                    }
                });
            });

            // Load saved theme
            const savedTheme = localStorage.getItem('preferred-theme');
            if (savedTheme) {
                setTheme(savedTheme);
            }
        }

        function setTheme(themeName) {
            const previousTheme = document.body.getAttribute('data-theme');
            document.body.setAttribute('data-theme', themeName);

            try {
                localStorage.setItem('preferred-theme', themeName);
            } catch (e) {
                console.warn('Failed to save theme preference:', e);
            }

            // Update active theme option
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });

            const selectedOption = document.querySelector(`[data-theme="${themeName}"]`);
            if (selectedOption) {
                selectedOption.classList.add('active');
            }

            // Clear custom theme if switching to preset
            if (themeName !== 'custom') {
                try {
                    localStorage.removeItem('custom-theme');
                } catch (e) {
                    console.warn('Failed to remove custom theme:', e);
                }
            }

            // Update floating emojis if theme changed and they're visible
            if (previousTheme !== themeName && settings.misc.showFloatingElements) {
                updateFloatingEmojis();
            }

            // Dispatch theme change event
            document.dispatchEvent(new CustomEvent('themeChanged', { detail: { theme: themeName, previousTheme } }));
        }

        // ===========================
        // CUSTOM THEME MAKER (ENHANCED)
        // ===========================

        function initCustomThemeMaker() {
            if (!elements.primaryColorPicker || !elements.accentColorPicker || !elements.applyCustomThemeBtn) return;

            elements.applyCustomThemeBtn.addEventListener('click', applyCustomTheme);

            // Load saved custom theme
            try {
                const savedCustomTheme = localStorage.getItem('custom-theme');
                if (savedCustomTheme) {
                    const customTheme = JSON.parse(savedCustomTheme);
                    elements.primaryColorPicker.value = customTheme.primary;
                    elements.accentColorPicker.value = customTheme.accent;
                }
            } catch (e) {
                console.warn('Failed to load custom theme:', e);
            }
        }

        function applyCustomTheme() {
            const primaryColor = elements.primaryColorPicker.value;
            const accentColor = elements.accentColorPicker.value;

            // Generate custom theme CSS variables
            const customTheme = generateCustomTheme(primaryColor, accentColor);

            // Apply custom theme
            applyThemeVariables(customTheme);

            // Save custom theme
            try {
                localStorage.setItem('custom-theme', JSON.stringify({
                    primary: primaryColor,
                    accent: accentColor
                }));
            } catch (e) {
                console.warn('Failed to save custom theme:', e);
            }

            // Update theme selection
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });

            // Add custom theme to body
            document.body.setAttribute('data-theme', 'custom');

            try {
                localStorage.setItem('preferred-theme', 'custom');
            } catch (e) {
                console.warn('Failed to save theme preference:', e);
            }

            // Visual feedback
            elements.applyCustomThemeBtn.textContent = 'Applied!';
            setTimeout(() => {
                elements.applyCustomThemeBtn.textContent = 'Apply Custom Theme';
            }, 2000);
        }

        function generateCustomTheme(primaryColor, accentColor) {
            // Convert hex to RGB for calculations
            const primaryRGB = hexToRgb(primaryColor);
            const accentRGB = hexToRgb(accentColor);

            // Generate color variations
            const secondaryColor = darkenColor(primaryColor, 0.1);
            const tertiaryColor = lightenColor(primaryColor, 0.1);
            const quaternaryColor = lightenColor(primaryColor, 0.2);

            // Calculate appropriate text colors
            const primaryTextColor = getContrastColor(primaryColor);
            const secondaryTextColor = blendColors(primaryTextColor, accentColor, 0.7);
            const tertiaryTextColor = blendColors(primaryTextColor, accentColor, 0.4);

            return {
                '--primary-bg': primaryColor,
                '--secondary-bg': secondaryColor,
                '--tertiary-bg': tertiaryColor,
                '--quaternary-bg': quaternaryColor,
                '--primary-text': primaryTextColor,
                '--secondary-text': secondaryTextColor,
                '--tertiary-text': tertiaryTextColor,
                '--accent-color': accentColor,
                '--border-color': `${accentColor}33`,
                '--hover-bg': `${accentColor}1A`,
                '--shadow-light': `${accentColor}4D`,
                '--shadow-dark': `${primaryColor}CC`,
                '--gradient-primary': `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`,
                '--gradient-secondary': `linear-gradient(135deg, ${secondaryColor} 0%, ${tertiaryColor} 100%)`,
                '--gradient-accent': `linear-gradient(135deg, ${accentColor} 0%, ${lightenColor(accentColor, 0.1)} 100%)`
            };
        }

        function applyThemeVariables(themeVariables) {
            const root = document.documentElement;
            Object.entries(themeVariables).forEach(([property, value]) => {
                root.style.setProperty(property, value);
            });
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function darkenColor(hex, factor) {
            const rgb = hexToRgb(hex);
            if (!rgb) return hex;

            return rgbToHex(
                Math.round(rgb.r * (1 - factor)),
                Math.round(rgb.g * (1 - factor)),
                Math.round(rgb.b * (1 - factor))
            );
        }

        function lightenColor(hex, factor) {
            const rgb = hexToRgb(hex);
            if (!rgb) return hex;

            return rgbToHex(
                Math.round(rgb.r + (255 - rgb.r) * factor),
                Math.round(rgb.g + (255 - rgb.g) * factor),
                Math.round(rgb.b + (255 - rgb.b) * factor)
            );
        }

        function getContrastColor(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return '#ffffff';

            const brightness = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
            return brightness > 128 ? '#000000' : '#ffffff';
        }

        function blendColors(color1, color2, ratio) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);

            if (!rgb1 || !rgb2) return color1;

            return rgbToHex(
                Math.round(rgb1.r * ratio + rgb2.r * (1 - ratio)),
                Math.round(rgb1.g * ratio + rgb2.g * (1 - ratio)),
                Math.round(rgb1.b * ratio + rgb2.b * (1 - ratio))
            );
        }

        // ===========================
        // AUDIO CONTROLS (FIXED)
        // ===========================

        function initAudioControls() {
            if (elements.playPauseBtn) {
                elements.playPauseBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    togglePlayPause();
                });
            }

            if (elements.nextBtn) {
                elements.nextBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    nextTrack();
                });
            }

            if (elements.prevBtn) {
                elements.prevBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    prevTrack();
                });
            }

            if (elements.progressBar) {
                elements.progressBar.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    seekTo(e);
                });

                // Add touch support for mobile
                if (isTouch) {
                    elements.progressBar.addEventListener('touchend', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        seekTo(e);
                    });
                }
            }

            // Enhanced volume slider handling
            if (elements.volumeSlider) {
                elements.volumeSlider.addEventListener('input', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    setVolume(parseFloat(e.target.value));
                });

                elements.volumeSlider.addEventListener('change', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    setVolume(parseFloat(e.target.value));
                });

                // Touch support
                if (isTouch) {
                    elements.volumeSlider.addEventListener('touchmove', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const touch = e.touches[0];
                        const rect = elements.volumeSlider.getBoundingClientRect();
                        const percentage = (touch.clientX - rect.left) / rect.width;
                        const value = Math.max(0, Math.min(100, percentage * 100));
                        setVolume(value);
                    });
                }
            }

            // Fixed playlist item clicks with proper event handling
            document.querySelectorAll('.playlist-item').forEach((item) => {
                const clickHandler = (e) => {
                    e.preventDefault();
                    e.stopPropagation();

                    // Mark user interaction
                    hasUserInteracted = true;

                    const index = parseInt(item.getAttribute('data-index'));
                    if (!isNaN(index)) {
                        loadTrack(index);

                        // Auto-play the selected track
                        setTimeout(() => {
                            const playPromise = elements.audioPlayer.play();
                            if (playPromise !== undefined) {
                                playPromise.catch(error => {
                                    console.error('Play failed:', error);
                                    showAudioError('Playback failed. Please try again.');
                                });
                            }
                        }, 200);
                    }
                };

                // Remove existing listeners
                item.removeEventListener('click', clickHandler);
                item.removeEventListener('touchend', clickHandler);

                // Add fresh listeners
                item.addEventListener('click', clickHandler);

                // Touch support with proper handling
                if (isTouch) {
                    item.addEventListener('touchend', clickHandler);
                }
            });
        }

        // ===========================
        // PERFORMANCE OPTIMIZATIONS (ENHANCED)
        // ===========================

        function throttle(func, delay) {
            let timeoutId;
            let lastExecTime = 0;
            return function (...args) {
                const currentTime = Date.now();

                if (currentTime - lastExecTime > delay) {
                    func.apply(this, args);
                    lastExecTime = currentTime;
                } else {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => {
                        func.apply(this, args);
                        lastExecTime = Date.now();
                    }, delay - (currentTime - lastExecTime));
                }
            };
        }

        function debounce(func, delay) {
            let timeoutId;
            return function (...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // ===========================
        // KEYBOARD NAVIGATION (ENHANCED)
        // ===========================

        document.addEventListener('keydown', (e) => {
            // Don't interfere with form inputs
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

            // Mark user interaction
            hasUserInteracted = true;

            switch (e.code) {
                case 'Space':
                    e.preventDefault();
                    togglePlayPause();
                    break;
                case 'ArrowRight':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        nextTrack();
                    }
                    break;
                case 'ArrowLeft':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        prevTrack();
                    }
                    break;
                case 'Escape':
                    e.preventDefault();
                    closeSettings();
                    closeMobileMenu();
                    break;
                case 'Home':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                    break;
                case 'KeyS':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        toggleSettings();
                    }
                    break;
                case 'KeyM':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        toggleMobileMenu();
                    }
                    break;
            }
        });

        // ===========================
        // RESPONSIVE BREAKPOINT HANDLING (ENHANCED)
        // ===========================

        function handleResize() {
            const width = window.innerWidth;
            const height = window.innerHeight;

            // Close mobile menu on resize to desktop
            if (width >= 768) {
                closeMobileMenu();
            }

            // Adjust settings menu on resize
            if (width < 768 && elements.settingsMenu.classList.contains('active')) {
                showSettingsSection(currentSettingsSection);
            }

            // Handle orientation change on mobile
            if (isMobile) {
                document.documentElement.style.setProperty('--vh', `${height * 0.01}px`);

                if (elements.settingsMenu.classList.contains('active')) {
                    setTimeout(() => {
                        showSettingsSection(currentSettingsSection);
                    }, 100);
                }
            }

            // Update floating elements based on new screen size
            updateFloatingElementsVisibility();

            // Recreate emojis on significant size changes
            if (settings.misc.showFloatingElements) {
                setTimeout(createFloatingEmojis, 250);
            }
        }

        window.addEventListener('resize', debounce(handleResize, 250));

        // Handle orientation change specifically
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                handleResize();
            }, 100);
        });

        // ===========================
        // MEMORY MANAGEMENT (ENHANCED)
        // ===========================

        window.addEventListener('beforeunload', () => {
            // Save settings before unloading
            saveSettings();

            // Pause and cleanup audio
            if (elements.audioPlayer) {
                elements.audioPlayer.pause();
                elements.audioPlayer.src = '';
                elements.audioPlayer.load();
            }

            // Clean up floating emojis
            removeFloatingEmojis();
        });

        // Cleanup on page hide (for mobile)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Pause audio when page is hidden
                if (isPlaying && elements.audioPlayer) {
                    elements.audioPlayer.pause();
                }

                // Reduce CPU usage by pausing animations
                if (settings.misc.showFloatingElements) {
                    const animatedElements = document.querySelectorAll('.floating-element, .floating-emoji');
                    animatedElements.forEach(el => {
                        el.style.animationPlayState = 'paused';
                    });
                }
            } else {
                // Resume animations when page is visible again
                if (settings.misc.showFloatingElements && !settings.misc.reducedMotion) {
                    const animatedElements = document.querySelectorAll('.floating-element, .floating-emoji');
                    animatedElements.forEach(el => {
                        el.style.animationPlayState = 'running';
                    });
                }
            }
        });

        console.log('üöÄ Fixed portfolio script loaded successfully!');
        console.log('üì± Device optimizations active for:', deviceType);
        console.log('‚ö° Performance mode:', isLowEndDevice ? 'Low-end device detected' : 'Standard performance');
        console.log('üéµ Audio system with user interaction detection ready!');
        console.log('üñ±Ô∏è Mobile cursor system initialized!');
    </script>
</body>

</html>12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
</svg>
</button>
<h3 class="settings-section-title">Mouse Customization</h3>
</div>
<div class="settings-content">
    <div class="setting-group">
        <label class="setting-label">
            <span class="setting-name">Enable Custom Cursor</span>
            <span class="setting-desc">Show custom cursor (works on mobile)</span>
        </label>
        <label class="toggle-switch">
            <input type="checkbox" id="cursorEnabled" checked>
            <span class="toggle-slider"></span>
        </label>
    </div>

    <div class="setting-group">
        <label class="setting-label">
            <span class="setting-name">Cursor Size</span>
            <span class="setting-desc">Adjust the size of the custom cursor</span>
        </label>
        <div class="setting-control">
            <input type="range" min="8" max="32" value="12" class="setting-slider" id="cursorSize">
            <span class="setting-value" id="cursorSizeValue">12px</span>
        </div>
    </div>

    <div class="setting-group">
        <label class="setting-label">
            <span class="setting-name">Cursor Opacity</span>
            <span class="setting-desc">Adjust cursor transparency</span>
        </label>
        <div class="setting-control">
            <input type="range" min="20" max="100" value="100" class="setting-slider" id="cursorOpacity">
            <span class="setting-value" id="cursorOpacityValue">100%</span>
        </div>
    </div>

    <div class="setting-group">
        <label class="setting-label">
            <span class="setting-name">Follower Size</span>
            <span class="setting-desc">Size of the cursor follower</span>
        </label>
        <div class="setting-control">
            <input type="range" min="20" max="60" value="36" class="setting-slider" id="followerSize">
            <span class="setting-value" id="followerSizeValue">36px</span>
        </div>
    </div>
</div>
</div>

<!-- Theme Customization Section -->
<div class="settings-section-view" id="themeSection">
    <div class="settings-header">
        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
        </button>
        <h3 class="settings-section-title">Theme Customization</h3>
    </div>
    <div class="settings-content">
        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Choose Theme</span>
                <span class="setting-desc">Select from preset themes</span>
            </label>
        </div>
        <div class="theme-grid">
            <div class="theme-option active" data-theme="default">
                <div class="theme-preview default-preview"></div>
                Default
            </div>
            <div class="theme-option" data-theme="jojos">
                <div class="theme-preview jojos-preview"></div>
                üéÄ J's Theme üéÄ
            </div>
            <div class="theme-option" data-theme="discord">
                <div class="theme-preview discord-preview"></div>
                Discord
            </div>
            <div class="theme-option" data-theme="spotify">
                <div class="theme-preview spotify-preview"></div>
                Spotify
            </div>
            <div class="theme-option" data-theme="vscode">
                <div class="theme-preview vscode-preview"></div>
                VS Code
            </div>
            <div class="theme-option" data-theme="ocean">
                <div class="theme-preview ocean-preview"></div>
                Ocean
            </div>
        </div>

        <!-- Custom Theme Maker -->
        <div class="custom-theme-section">
            <h4 class="custom-theme-title">Create Custom Theme</h4>
            <div class="color-pickers">
                <div class="color-picker-group">
                    <label for="primaryColor">Primary Color</label>
                    <input type="color" id="primaryColor" value="#000000" class="color-input">
                </div>
                <div class="color-picker-group">
                    <label for="accentColor">Accent Color</label>
                    <input type="color" id="accentColor" value="#ffffff" class="color-input">
                </div>
            </div>
            <button class="apply-custom-theme" id="applyCustomTheme">Apply Custom Theme</button>
        </div>
    </div>
</div>

<!-- Music Player Section -->
<div class="settings-section-view" id="musicSection">
    <div class="settings-header">
        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
        </button>
        <h3 class="settings-section-title">Music Player</h3>
    </div>
    <div class="settings-content">
        <div class="music-player">
            <div id="audioError" class="audio-error hidden">
                Music files not found. Make sure to add your audio files to the /music folder or reload the page and try
                again.
            </div>

            <div class="player-info">
                <div class="track-info">
                    <div class="track-title" id="currentTrackTitle">Select a track</div>
                    <div class="track-artist" id="currentTrackArtist">Click a song to play</div>
                </div>

                <div class="player-controls">
                    <button class="control-btn" id="prevBtn" aria-label="Previous track">
                        <span class="control-shimmer"></span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                        </svg>
                    </button>
                    <button class="control-btn play-pause-btn" id="playPauseBtn" aria-label="Play/Pause">
                        <span class="control-shimmer"></span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="play-icon">
                            <path d="m7 4 10 8L7 20V4z" />
                        </svg>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="pause-icon hidden">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                        </svg>
                    </button>
                    <button class="control-btn" id="nextBtn" aria-label="Next track">
                        <span class="control-shimmer"></span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z" />
                        </svg>
                    </button>
                </div>

                <div class="progress-section">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                        <div class="progress-handle"></div>
                    </div>
                    <div class="time-display">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>

                <div class="volume-section">
                    <div class="volume-icon-container">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="volume-icon-svg">
                            <path
                                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                        </svg>
                    </div>
                    <div class="volume-slider-container" id="volumeSliderContainer">
                        <input type="range" min="0" max="100" value="70" class="volume-slider" id="volumeSlider">
                        <div class="volume-slider-track">
                            <div class="volume-slider-fill" id="volumeSliderFill"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="playlist-section">
                <div class="playlist-header">
                    <span class="playlist-icon">üéµ</span>
                    <span>Playlist</span>
                </div>
                <ul class="playlist" id="playlist">
                    <li class="playlist-item" data-index="0">
                        <div class="track-number">1</div>
                        <div class="track-details">
                            <div class="playlist-track-title">Say Slatt Say Ski</div>
                            <div class="playlist-track-artist">Lucki</div>
                        </div>
                        <div class="track-duration">3:09</div>
                    </li>
                    <li class="playlist-item" data-index="1">
                        <div class="track-number">2</div>
                        <div class="track-details">
                            <div class="playlist-track-title">Limerence</div>
                            <div class="playlist-track-artist">Lucki</div>
                        </div>
                        <div class="track-duration">2:46</div>
                    </li>
                    <li class="playlist-item" data-index="2">
                        <div class="track-number">3</div>
                        <div class="track-details">
                            <div class="playlist-track-title">Go Hard 2.0</div>
                            <div class="playlist-track-artist">Juice WRLD</div>
                        </div>
                        <div class="track-duration">3:34</div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Visual & Performance Section -->
<div class="settings-section-view" id="miscSection">
    <div class="settings-header">
        <button class="settings-back-btn" data-back="main" aria-label="Back to main menu">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
            </svg>
        </button>
        <h3 class="settings-section-title">Misc.</h3>
    </div>
    <div class="settings-content">
        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Reduced Motion</span>
                <span class="setting-desc">Disable heavy animations for better performance</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="reducedMotion">
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Auto-play Music</span>
                <span class="setting-desc">Automatically start music when page loads</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="autoplayMusic">
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Show Floating Elements</span>
                <span class="setting-desc">Display animated code snippets and shapes</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="showFloatingElements" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Background Particles</span>
                <span class="setting-desc">Show floating particles in background</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="showParticles" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Code Snippets Animation</span>
                <span class="setting-desc">Enable floating code elements</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="showCodeSnippets" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Geometric Shapes</span>
                <span class="setting-desc">Display animated geometric elements</span>
            </label>
            <label class="toggle-switch">
                <input type="checkbox" id="showGeometricShapes" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="setting-group">
            <label class="setting-label">
                <span class="setting-name">Animation Speed</span>
                <span class="setting-desc">Control speed of all animations</span>
            </label>
            <div class="setting-control">
                <input type="range" min="50" max="200" value="100" class="setting-slider" id="animationSpeed">
                <span class="setting-value" id="animationSpeedValue">100%</span>
            </div>
        </div>

        <div class="setting-group">
            <button class="reset-settings-btn" id="resetSettings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />
                </svg>
                Reset All Settings
            </button>
        </div>
    </div>
</div>



</body>

</html>